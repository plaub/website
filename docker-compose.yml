services:
  astro-dev:
    # Use a standard Node image for development
    image: node:20-alpine
    container_name: astro_local_dev
    
    # Map the default Astro dev port
    ports:
      - "4321:4321" 
      
    # Mount the current project directory into the container. 
    # This enables live reloading/watching for file changes.
    volumes:
      - .:/app
      - /app/node_modules # Important: Prevent host's node_modules from overwriting container's
      
    working_dir: /app
    
    # Command to install dependencies and start the Astro development server
    command: sh -c "npm install && npm run dev -- --host 0.0.0.0" 
    # Note: --host 0.0.0.0 is crucial so the server is accessible from the host machine